# Máquina de Turing Alteradora: DUPLICA la cadena
# Transforma: "abc" → "abc#abc"
# Más compleja e interesante que simple swap
# Usa un separador '#' para marcar dónde empieza la copia

q_states:
  q_list:
    - "q0" # Inicio - ir al final de la cadena
    - "q1" # Escribir separador '#'
    - "q2" # Volver al inicio
    - "q3" # Copiar 'a'
    - "q4" # Copiar 'b'
    - "q5" # Marca símbolo como copiado (X)
    - "q6" # Ir al final para escribir
    - "q7" # Verificar si terminó la copia
    - "qf" # Estado final
  initial: "q0"
  final: "qf"

alphabet:
  - a
  - b

tape_alphabet:
  - a
  - b
  - "#" # Separador
  - X # Marca de "ya copiado"
  -  # blank

delta:
  # ==== q0: Ir al final de la cadena original ====
  - params:
      initial_state: "q0"
      mem_cache_value: ""
      tape_input: a
    output:
      final_state: "q0"
      mem_cache_value: ""
      tape_output: a
      tape_displacement: R

  - params:
      initial_state: "q0"
      mem_cache_value: ""
      tape_input: b
    output:
      final_state: "q0"
      mem_cache_value: ""
      tape_output: b
      tape_displacement: R

  # Llegamos al final -> escribir separador
  - params:
      initial_state: "q0"
      mem_cache_value: ""
      tape_input:
    output:
      final_state: "q1"
      mem_cache_value: ""
      tape_output: "#"
      tape_displacement: L

  # ==== q1: Volver al inicio después de escribir '#' ====
  - params:
      initial_state: "q1"
      mem_cache_value: ""
      tape_input: a
    output:
      final_state: "q1"
      mem_cache_value: ""
      tape_output: a
      tape_displacement: L

  - params:
      initial_state: "q1"
      mem_cache_value: ""
      tape_input: b
    output:
      final_state: "q1"
      mem_cache_value: ""
      tape_output: b
      tape_displacement: L

  # Llegamos al inicio -> empezar a copiar
  - params:
      initial_state: "q1"
      mem_cache_value: ""
      tape_input:
    output:
      final_state: "q2"
      mem_cache_value: ""
      tape_output:
      tape_displacement: R

  # ==== q2: Buscar siguiente símbolo a copiar ====
  - params:
      initial_state: "q2"
      mem_cache_value: ""
      tape_input: X
    output:
      final_state: "q2"
      mem_cache_value: ""
      tape_output: X
      tape_displacement: R

  # Encontrar 'a' -> recordar y marcar
  - params:
      initial_state: "q2"
      mem_cache_value: ""
      tape_input: a
    output:
      final_state: "q3"
      mem_cache_value: "a"
      tape_output: X
      tape_displacement: R

  # Encontrar 'b' -> recordar y marcar
  - params:
      initial_state: "q2"
      mem_cache_value: ""
      tape_input: b
    output:
      final_state: "q4"
      mem_cache_value: "b"
      tape_output: X
      tape_displacement: R

  # Todos los símbolos copiados (encontramos '#')
  - params:
      initial_state: "q2"
      mem_cache_value: ""
      tape_input: "#"
    output:
      final_state: "qf"
      mem_cache_value: ""
      tape_output: "#"
      tape_displacement: S

  # ==== q3: Ir al final con 'a' en memoria ====
  - params:
      initial_state: "q3"
      mem_cache_value: "a"
      tape_input: a
    output:
      final_state: "q3"
      mem_cache_value: "a"
      tape_output: a
      tape_displacement: R

  - params:
      initial_state: "q3"
      mem_cache_value: "a"
      tape_input: b
    output:
      final_state: "q3"
      mem_cache_value: "a"
      tape_output: b
      tape_displacement: R

  - params:
      initial_state: "q3"
      mem_cache_value: "a"
      tape_input: X
    output:
      final_state: "q3"
      mem_cache_value: "a"
      tape_output: X
      tape_displacement: R

  - params:
      initial_state: "q3"
      mem_cache_value: "a"
      tape_input: "#"
    output:
      final_state: "q3"
      mem_cache_value: "a"
      tape_output: "#"
      tape_displacement: R

  # Escribir 'a' al final
  - params:
      initial_state: "q3"
      mem_cache_value: "a"
      tape_input:
    output:
      final_state: "q5"
      mem_cache_value: ""
      tape_output: a
      tape_displacement: L

  # ==== q4: Ir al final con 'b' en memoria ====
  - params:
      initial_state: "q4"
      mem_cache_value: "b"
      tape_input: a
    output:
      final_state: "q4"
      mem_cache_value: "b"
      tape_output: a
      tape_displacement: R

  - params:
      initial_state: "q4"
      mem_cache_value: "b"
      tape_input: b
    output:
      final_state: "q4"
      mem_cache_value: "b"
      tape_output: b
      tape_displacement: R

  - params:
      initial_state: "q4"
      mem_cache_value: "b"
      tape_input: X
    output:
      final_state: "q4"
      mem_cache_value: "b"
      tape_output: X
      tape_displacement: R

  - params:
      initial_state: "q4"
      mem_cache_value: "b"
      tape_input: "#"
    output:
      final_state: "q4"
      mem_cache_value: "b"
      tape_output: "#"
      tape_displacement: R

  # Escribir 'b' al final
  - params:
      initial_state: "q4"
      mem_cache_value: "b"
      tape_input:
    output:
      final_state: "q5"
      mem_cache_value: ""
      tape_output: b
      tape_displacement: L

  # ==== q5: Volver al inicio después de escribir ====
  - params:
      initial_state: "q5"
      mem_cache_value: ""
      tape_input: a
    output:
      final_state: "q5"
      mem_cache_value: ""
      tape_output: a
      tape_displacement: L

  - params:
      initial_state: "q5"
      mem_cache_value: ""
      tape_input: b
    output:
      final_state: "q5"
      mem_cache_value: ""
      tape_output: b
      tape_displacement: L

  - params:
      initial_state: "q5"
      mem_cache_value: ""
      tape_input: "#"
    output:
      final_state: "q5"
      mem_cache_value: ""
      tape_output: "#"
      tape_displacement: L

  - params:
      initial_state: "q5"
      mem_cache_value: ""
      tape_input: X
    output:
      final_state: "q5"
      mem_cache_value: ""
      tape_output: X
      tape_displacement: L

  # Llegamos al inicio -> buscar siguiente
  - params:
      initial_state: "q5"
      mem_cache_value: ""
      tape_input:
    output:
      final_state: "q2"
      mem_cache_value: ""
      tape_output:
      tape_displacement: R

simulation_strings:
  - aabba # → aabba#aabba
  - bbbaa # → bbbaa#bbbaa
  - aaabbb # → aaabbb#aaabbb
  - ababab # → ababab#ababab
